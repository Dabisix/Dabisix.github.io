---
categories: Infra DevOps
date: 2022-07-17 17:07:00 +0900
pin: Yes
tags: docker jenkins webhook
title: Jenkins
---

# Intro

---

`ì›¹ ê¸°ìˆ `ì„ ì£¼ì œë¡œ í•˜ëŠ” ê³µí†µ í”„ë¡œì íŠ¸ì—ì„œ, CI/CD í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ í•™ìŠµí•´ë³´ì•˜ë‹¤.

<br>
<br>

# Main

---

## Jenkinsë€ ?

> **ëª¨ë“  ì–¸ì–´ì˜ ì¡°í•©ê³¼ ì†ŒìŠ¤ì½”ë“œ ë ˆí¬ì§€í† ë¦¬ì— ëŒ€í•œ `CI/CD` í™˜ê²½ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë„êµ¬**

- CI (Continuous Integration) : ì§€ì†ì ì¸ í†µí•©
- CD (Continuous Delivery) : ì§€ì†ì ì¸ ë°°í¬

ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆê³¼ ê°œë°œ ìƒì‚°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

1. **í¸ë¦¬í•œ ì„¤ì •**
   - ì›¹ ê¸°ë°˜ì˜ ì½˜ì†”ë¡œ ë‹¤ì–‘í•œ ì¸ì¦ ê¸°ë°˜ê³¼ ê²°í•©ì´ ê°€ëŠ¥í•˜ë©° ê¶Œí•œ ê´€ë¦¬ ê¸°ëŠ¥ì„ í†µí•´ ì•ˆì „í•œ ë¹Œë“œ/ë°°í¬ í™˜ê²½ êµ¬ì¶• ê°€ëŠ¥
   - ìë™í™”ë¡œ ë°˜ë³µë˜ëŠ” ì‘ì—… ê°ì†Œ
2. **ì•ˆì •ì ì¸ ë¹Œë“œ/ë°°í¬ í™˜ê²½**
   - ì†ŒìŠ¤ë²„ì „ ê´€ë¦¬ íˆ´(git)ê³¼ ì—°ë™í•˜ì—¬ ì½”ë“œë³€ê²½ì„ ê°ì§€í•˜ê³ , ìë™í™” í…ŒìŠ¤íŠ¸ë¥¼ í¬í•¨í•œ ë¹Œë“œ ìˆ˜í–‰ìœ¼ë¡œ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆ í–¥ìƒ
   - ìë™í™” í…ŒìŠ¤íŠ¸ : ì½”ë”© í‘œì¤€ ì¤€ìˆ˜ì—¬ë¶€ ì²´í¬, ìœ ë‹› í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸
   - í…ŒìŠ¤íŠ¸ ê²°ê³¼ì— ëŒ€í•œ í”¼ë“œë°±ì„ ë°›ì•„ ì ì¬ì  ì˜¤ë¥˜ ì‚¬ì „ì˜ˆë°© ê°€ëŠ¥
3. **ë‹¤ì–‘í•œ í™œìš© ë° ì†ì‰¬ìš´ í™•ì¥**
   - JenkinsëŠ” ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ì´ê¸° ë•Œë¬¸ì—, ë¬¸ì„œí™”ê°€ ì˜ ë˜ì–´ìˆìŒ.
   - ë‹¤ì–‘í•œ ì ìš©ì‚¬ë¡€ ì°¸ê³  ê°€ëŠ¥
   - í”ŒëŸ¬ê·¸ì¸ ì§ì ‘ ê°œë°œí•˜ì—¬ ê¸°ëŠ¥í™•ì¥ ê°€ëŠ¥

<br>

## Webhook

> **ì›¹í˜ì´ì§€ ë˜ëŠ” ì›¹ì•±ì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì • í–‰ë™(ì´ë²¤íŠ¸)ë“¤ì„ ì»¤ìŠ¤í…€ Callbackìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” ë°©ë²•**

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/0e701659-c4ae-433c-a330-50309593bac5/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000003Z&X-Amz-Expires=86400&X-Amz-Signature=192ba464a56f6880fc4cb7aa3b66cdfd022943d7a054002e004e334cc456a566&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

ì¼ë°˜ì ì¸ API`(Polling)`ëŠ” **í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¥¼ í˜¸ì¶œ**í•˜ëŠ” ë°©ì‹ì´ë‹¤. í´ë¼ì´ì–¸íŠ¸ê°€ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì–»ê¸° ìœ„í•´ì„œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì§€ì†ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ë©°, ë§¤ìš° ë‚­ë¹„ê°€ ì‹¬í•˜ë‹¤.

ë°˜ë©´ `Webhook`ì€, **ì„œë²„ì—ì„œ** ë°ì´í„° ë³€ê²½ê³¼ ê°™ì€ ì‘ì—… **(ì´ë²¤íŠ¸)ì´ ìˆ˜í–‰ ë  ë•Œ í•´ë‹¹ ì •ë³´ë¥¼ HTTP POST ë°©ì‹ìœ¼ë¡œ ì•Œë¦¬ëŠ” ê°œë…**ì´ë‹¤. ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ URLì„ ì§€ì •í•˜ê²Œ ë˜ë©´ **`ì—­ë°©í–¥ API`**ì²˜ëŸ¼ ì„œë²„ì—ì„œ í•´ë‹¹ URLì— ëŒ€í•´ POST ë°©ì‹ìœ¼ë¡œ ì½œë°±ì„ í•˜ê²Œëœë‹¤.

> ğŸ“Œ callback URL : ì„œë²„ì¸¡ì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ í´ë¼ì´ì–¸íŠ¸ì˜ ì–´ëŠ URLë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ì§€ ì •í•´ë†“ì€ ì£¼ì†Œ

ì´ì²˜ëŸ¼ í´ë¼ì´ì–¸íŠ¸ì˜ ì…ì¥ì—ì„œëŠ” ìì‹ ì´ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì–»ê¸° ìœ„í•´ **ë°˜ë³µì ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ HTTP ìš”ì²­ì„ ìƒì„±í•  í•„ìš”ê°€ ì—†ê³ **, ì„œë²„ ì…ì¥ì—ì„œëŠ” ë¶ˆí•„ìš”í•œ HTTP ìš”ì²­ì´ ê°ì†Œí•˜ê¸° ë•Œë¬¸ì— **ì„œë²„ì— ë¶€ë‹´ì„ ì¤„ì—¬ì£¼ëŠ” ì¥ì **ì´ ìˆë‹¤.

ë‹¹ì—°í•˜ê²Œë„ ì„œë²„ì—ì„œ ì´ë²¤íŠ¸ë¥¼ ì¸ì‹í•˜ê³  ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ê¸°ì—, ì‚¬ìš©í•˜ë ¤ëŠ” APIê°€ webhookê¸°ëŠ¥ì„ ì œê³µí•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Githubì™€ Gitlabì—ì„œëŠ” ë ˆí¬ì§€í† ë¦¬ì— ëŒ€í•œ Webhook ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ, **Jenkinsì—ì„œëŠ” webhookì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œì˜ ë³€ê²½ì‚¬í•­ì„ ê°ì§€í•˜ê³  ë¹Œë“œë¥¼ ì§„í–‰**í•˜ê²Œ ëœë‹¤.

<br>

## Dockerë¡œ Jenkins ì„¤ì¹˜í•˜ê¸°

> ğŸ‘‰ ë„ì»¤ê°€ ì„¤ì¹˜ë˜ì–´ìˆëŠ” í™˜ê²½ì—ì„œ ì§„í–‰ë˜ì—ˆìŒ

### **ì  í‚¨ìŠ¤ ì„¤ì¹˜**

1. ì  í‚¨ìŠ¤ ì„¤ì¹˜

   command ì°½ì— ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

   ```bash
   docker run -d -p 9090:8080 -p 50000:50000
    -v /var/jenkins:/var/jenkins_home
    -v /var/run/docker.sock:/var/run/docker.sock
    --name jenkins
    -u root jenkins/jenkins:lts-jdk11
   ```

   ìœ„ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´, jenkinsì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ëœë‹¤.

   ì²˜ìŒì— ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ ë–´ë‹¤ê°€ ì•„ë˜ë¡œ ì´ë ‡ê²Œ ëœ¨ë©´ì„œ ì„¤ì¹˜ê°€ ì§„í–‰ëœë‹¤.

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ed79f993-56eb-4e67-88a6-5aede3604ee2/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000027Z&X-Amz-Expires=86400&X-Amz-Signature=3e0051e90b6f8dc7919885c41c721d558f9359cf838be833e5a22b30e058b88e&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

2. admin ë¹„ë°€ë²ˆí˜¸ ì…ë ¥

   ìœ„ ëª…ë ¹ì–´ëŠ” í¬íŠ¸9090ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, `localhost:9090`ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ì  í‚¨ìŠ¤ë¥¼ ì—°ë‹¤.

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/b5cdb237-fcdd-4723-950d-e3fb379518f0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000043Z&X-Amz-Expires=86400&X-Amz-Signature=e8b5c921d406773e1f51f65143876b078a736b10b205881b423bc3d12118b1e6&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

   jenkinsë¥¼ ì„¤ì¹˜í•  ë•Œ ìƒê¸°ëŠ” ë¡œê·¸ì— ì í˜€ìˆë˜ admin ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì¤€ë‹¤.

   ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì¹˜ë©´ ë¡œê·¸í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.

   ```bash
   docker logs jenkins
   ```

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/e772a7f5-9446-4ea5-aeca-9878b216cda3/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000135Z&X-Amz-Expires=86400&X-Amz-Signature=8b4159724d453658a215a53c61ce45b6d6bce4fc6323a81566594e22aa9ef900&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

3. ê¸°ë³¸ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

   ì¶”ì²œëœ ê¸°ë³¸ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•´ì¤€ë‹¤. ì‹œê°„ ì¢€ ê±¸ë¦¼.

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/1cda913a-cb82-413f-87d3-38d2a5372927/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000149Z&X-Amz-Expires=86400&X-Amz-Signature=77c0dbc9100ea91fdedb577b8629784956edb10dc07e38cb8a2f42965394ae48&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/196d3549-9235-4702-b261-b26442f34d17/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000153Z&X-Amz-Expires=86400&X-Amz-Signature=5c1a807ccdd7ee837d4cb664a87504c8d0823bebe7ab39ea9367735480611af9&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

4. ê´€ë¦¬ì ê³„ì • ìƒì„±

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/99a00518-5b73-4566-9da4-f8117800c117/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000202Z&X-Amz-Expires=86400&X-Amz-Signature=fc43022f16cebe22095c7abb94304d02df21be3536439a286806b5a153fe2df5&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

   ìƒì„± ì•ˆí•˜ê³  ë°‘ì— adminìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë²„íŠ¼ ëˆŒëŸ¬ë„ ëœë‹¤.

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/b5b56eda-4ddb-4f36-b63a-9bdc15ceec8a/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000205Z&X-Amz-Expires=86400&X-Amz-Signature=f6442090d7ff9ad5291decd32b477acbd6fc0225380e8b3c5f50ecbb02fb5028&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

   ![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/c423e871-6ff1-41b9-8b36-bca211136132/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000209Z&X-Amz-Expires=86400&X-Amz-Signature=51ad8654ee1dc37bfac7d070d5a380e470422a503cce6903ce281ec68fcec944&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

<br>

### **ì  í‚¨ìŠ¤ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜**

> DashBoard > Manager Jenkins > Plugin Manager <br>
> ë˜ëŠ” `ì  í‚¨ìŠ¤ì£¼ì†Œ/pluginManager` ë¡œ ì´ë™í•˜ì—¬ ì„¤ì¹˜

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/8f581271-73ce-4417-b5f0-c910d206f3f0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000213Z&X-Amz-Expires=86400&X-Amz-Signature=a274ff2bc7f7eb75beb36dc97e1c707f57b825ef839c2dedddc9a72bcdfd5b79&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

ìš°ë¦¬ëŠ” gitlabìœ¼ë¡œ ì½”ë“œë¥¼ ê´€ë¦¬í•˜ê³ , dockerë¡œ íŒ¨í‚¤ì§• í• êº¼ë‹ˆê¹Œ ì´ ë‘ê°œì— í•„ìš”í•œ ì•„ë˜ì˜ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•´ì¤€ë‹¤.

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/2db5c77e-b23c-4088-9916-fd230faf9e05/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000216Z&X-Amz-Expires=86400&X-Amz-Signature=c59cfb3c6d3a9325859ca96c337ffa397f1473810229fec250302720927d39db&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/066a5ad0-70d8-498c-bb76-35286454620c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230323%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230323T000219Z&X-Amz-Expires=86400&X-Amz-Signature=18d4defbf8ac87260a57476c80f4811e2ddb71149002c6f4d9444ba01a3ec81d&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

<br>
<br>

### **íŠ¹ì • ë¸Œëœì¹˜ë§Œ ë³€ë™ì‚¬í•­ ì¸ì‹í•˜ë„ë¡ ì„¤ì •í•˜ê¸°**

ì  í‚¨ìŠ¤ëŠ” íŠ¹ì • ë¸Œëœì¹˜ì—ì„œ ë³€ë™ì‚¬í•­ì´ ì¼ì–´ë‚˜ë©´ ì  í‚¨ìŠ¤ì— ì•Œë ¤ì£¼ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

ì „ì²´ ë¸Œëœì¹˜ì˜ ì—…ë°ì´íŠ¸ë¥¼ ê´€ë¦¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ !

ì´ì œ Jobì„ ë“±ë¡í•˜ê³  ë¹Œë“œë¥¼ ì§„í–‰í•˜ë©´ ëœë‹¤.

<br>
<br>

# Outro

---

[[Jenkins] ì  í‚¨ìŠ¤ë€?](https://narup.tistory.com/179)

[[jenkins] webhook ì‚¬ìš© ìë™ë¹Œë”©(ë°°í¬) ì‹œ, íŠ¹ì • ë¸ŒëŸ°ì¹˜ëª…ë§Œ ì‹¤í–‰í•˜ê¸°(CI/CD ì˜µì…˜)](https://lemontia.tistory.com/1054)
